---
title: CLI Reference
description: Complete command-line interface reference
---

Complete reference for all Birch CLI commands.

## Global Options

```bash
birch [OPTIONS] <COMMAND>
```

**Options:**
- `--dry-run`: Preview changes without applying them
- `-h, --help`: Print help information
- `-V, --version`: Print version information

## Commands

### rotate

Rotate a secret in dev or production.

```bash
birch rotate [SECRET_NAME] [OPTIONS]
```

**Arguments:**
- `SECRET_NAME`: Name of the secret to rotate (optional if using `--from-signal`)

**Options:**
- `--env <ENV>`: Environment (dev/staging/prod) [required]
- `--service <SERVICE>`: Service name (vercel/netlify/render/cloudflare/fly/aws/gcp/azure)
- `--from-signal`: Trigger rotation from app signal
- `--redeploy`: Trigger redeploy after rotation (prod only)
- `--value <VALUE>`: Custom secret value (auto-generated if not provided)
- `--env-file <PATH>`: Path to .env file (dev mode only)

**Examples:**

```bash
# Dev mode
birch rotate MY_API_KEY --env dev

# Production with Vercel
birch rotate MY_API_KEY --env prod --service vercel

# With custom value
birch rotate MY_API_KEY --env prod --service vercel --value "my-secret-123"

# Dry run
birch rotate MY_API_KEY --env prod --service vercel --dry-run

# With redeploy
birch rotate MY_API_KEY --env prod --service vercel --redeploy
```

### rollback

Rollback a secret to its previous value.

```bash
birch rollback <SECRET_NAME> [OPTIONS]
```

**Arguments:**
- `SECRET_NAME`: Name of the secret to rollback [required]

**Options:**
- `--env <ENV>`: Environment (dev/staging/prod) [required]
- `--service <SERVICE>`: Service name (for prod mode)
- `--redeploy`: Trigger redeploy after rollback (prod only)

**Examples:**

```bash
# Dev mode
birch rollback MY_API_KEY --env dev

# Production
birch rollback MY_API_KEY --env prod --service vercel

# With redeploy
birch rollback MY_API_KEY --env prod --service vercel --redeploy
```

### daemon

Manage the background daemon for app-signal rotation.

```bash
birch daemon <ACTION>
```

**Actions:**
- `start [--bind <ADDRESS>]`: Start the daemon
- `stop`: Stop the daemon
- `status`: Check daemon status

**Options:**
- `--bind <ADDRESS>`: Bind address (default: 127.0.0.1:9123)

**Examples:**

```bash
# Start daemon
birch daemon start

# Start on custom port
birch daemon start --bind 0.0.0.0:9123

# Stop daemon
birch daemon stop

# Check status
birch daemon status
```

### audit

View audit logs for secret rotations.

```bash
birch audit [SECRET_NAME] [OPTIONS]
```

**Arguments:**
- `SECRET_NAME`: Filter by secret name (optional)

**Options:**
- `--env <ENV>`: Filter by environment
- `--last <N>`: Show last N entries

**Examples:**

```bash
# All recent rotations
birch audit --last 10

# Specific secret
birch audit MY_API_KEY

# Specific secret and environment
birch audit MY_API_KEY --env prod

# Last 5 entries for an environment
birch audit --env prod --last 5
```

### config

Manage Birch configuration.

```bash
birch config [ACTION]
```

**Actions:**
- `show`: Display current configuration (default)
- `init`: Initialize default configuration

**Examples:**

```bash
# Show config
birch config
birch config show

# Initialize config
birch config init
```

### pool

Manage key pools for automatic rotation.

```bash
birch pool <ACTION>
```

**Actions:**
- `init`: Create a new key pool
- `add`: Add a key to existing pool
- `list`: Display all keys in pool
- `remove`: Remove a key from pool
- `import`: Import keys from file
- `status`: Show pool statistics

#### pool init

Create a new key pool with initial keys.

```bash
birch pool init <SECRET_NAME> [OPTIONS]
```

**Arguments:**
- `SECRET_NAME`: Name of the secret (e.g., TIKTOK_API_KEY) [required]

**Options:**
- `--keys <KEYS>`: Comma-separated list of keys
- `--from-file <FILE>`: Path to file with keys (one per line)

**Examples:**

```bash
# Create pool with inline keys
birch pool init TIKTOK_API_KEY --keys "key1,key2,key3"

# Create pool from file
birch pool init TIKTOK_API_KEY --from-file ./tiktok-keys.txt

# Keys file format (one key per line):
# sk_abc123xyz
# sk_def456uvw
# sk_ghi789rst
# # Comments and empty lines are ignored
```

#### pool add

Add a single key to an existing pool.

```bash
birch pool add <SECRET_NAME> --key <KEY>
```

**Arguments:**
- `SECRET_NAME`: Name of the secret pool [required]

**Options:**
- `--key <KEY>`: The key value to add [required]

**Examples:**

```bash
birch pool add TIKTOK_API_KEY --key "sk_new123abc"
```

#### pool list

Display all keys in a pool with their status.

```bash
birch pool list <SECRET_NAME>
```

**Arguments:**
- `SECRET_NAME`: Name of the secret pool [required]

**Examples:**

```bash
birch pool list TIKTOK_API_KEY
# Output:
# Pool: TIKTOK_API_KEY
# ─────────────────────────────────────
# 0: Active ***abc (last used: 2024-01-15 14:30:22)
# 1: Available ***xyz
# 2: Exhausted ***def (last used: 2024-01-15 12:15:10)
# ─────────────────────────────────────
# Total: 3 keys
# Available: 1 | Active: 1 | Exhausted: 1
```

#### pool remove

Remove a key from a pool by its index.

```bash
birch pool remove <SECRET_NAME> --index <INDEX>
```

**Arguments:**
- `SECRET_NAME`: Name of the secret pool [required]

**Options:**
- `--index <INDEX>`: Index of the key to remove [required]

**Examples:**

```bash
# Remove key at index 2
birch pool remove TIKTOK_API_KEY --index 2
```

#### pool import

Import multiple keys from a file into an existing pool.

```bash
birch pool import <SECRET_NAME> --from-file <FILE>
```

**Arguments:**
- `SECRET_NAME`: Name of the secret pool [required]

**Options:**
- `--from-file <FILE>`: Path to file with keys (one per line) [required]

**Examples:**

```bash
birch pool import TIKTOK_API_KEY --from-file ./additional-keys.txt
```

#### pool status

Show detailed statistics about a key pool.

```bash
birch pool status <SECRET_NAME>
```

**Arguments:**
- `SECRET_NAME`: Name of the secret pool [required]

**Examples:**

```bash
birch pool status TIKTOK_API_KEY
# Output:
# Pool: TIKTOK_API_KEY
# Status: Ready
#
# Total keys:      5
# Available:       3 (60%)
# Active:          1
# Exhausted:       1
#
# Current index:   2
# Last rotation:   2024-01-15 14:30:22 UTC
```

## Exit Codes

- `0`: Success
- `1`: General error (invalid arguments, operation failed, etc.)
- `101`: Compilation/build error (internal use)

## Environment Variables

### Core Settings

- `BIRCH_CONFIG_PATH`: Path to config file
- `BIRCH_AUDIT_LOG_PATH`: Audit log directory
- `BIRCH_COOLDOWN_SECONDS`: Cooldown period
- `BIRCH_ROLLBACK_WINDOW_SECONDS`: Rollback window
- `BIRCH_DAEMON_BIND`: Daemon bind address
- `BIRCH_POOL_LOW_THRESHOLD`: Warning threshold for pool keys (default: 2)

### Provider Credentials

**Vercel:**
- `VERCEL_TOKEN`
- `VERCEL_PROJECT_ID`

**Netlify:**
- `NETLIFY_AUTH_TOKEN`
- `NETLIFY_SITE_ID`

**Render:**
- `RENDER_API_KEY`
- `RENDER_SERVICE_ID`

**Cloudflare:**
- `CLOUDFLARE_API_TOKEN`
- `CLOUDFLARE_ACCOUNT_ID`
- `CLOUDFLARE_WORKER_NAME`

**Fly.io:**
- `FLY_API_TOKEN`
- `FLY_APP_NAME`

**AWS:**
- `AWS_ACCESS_KEY_ID`
- `AWS_SECRET_ACCESS_KEY`
- `AWS_REGION`

**GCP:**
- `GOOGLE_APPLICATION_CREDENTIALS`
- `GCP_PROJECT_ID`

**Azure:**
- `AZURE_CLIENT_ID`
- `AZURE_CLIENT_SECRET`
- `AZURE_TENANT_ID`
- `AZURE_VAULT_NAME`

## Configuration File

Default location: `~/.birch/config.toml`

See [Configuration](/docs/configuration) for full details.

## Shell Completion

Shell completion support is planned for a future release.

