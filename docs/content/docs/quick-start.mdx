---
title: Quick Start
description: Get started with Birch in 5 minutes
---

This guide will help you perform your first secret rotation in both development and production environments.

## Prerequisites

- Birch installed ([Installation Guide](/docs/installation))
- Access to a `.env` file (for dev mode) or provider credentials (for prod mode)

## Initialize Configuration

First, create the default configuration:

```bash
birch config init
```

This creates `~/.birch/config.toml` with default settings.

## Dev Mode: Rotate a Secret in .env

Rotate a secret in your local `.env` file:

```bash
# Navigate to your project directory
cd /path/to/your/project

# Rotate a secret
birch rotate MY_API_KEY --env dev
```

This will:
1. Update `MY_API_KEY` in your `.env` file
2. Save a rollback copy to `.birch-rollback`
3. Display the new masked value

### Restart Your Application

After rotation, restart your application to use the new secret:

```bash
npm run dev  # or your start command
```

### Rollback if Needed

If something goes wrong, rollback to the previous value:

```bash
birch rollback MY_API_KEY --env dev
```

## Production Mode: Rotate on Vercel

For production, you'll need provider credentials. Let's rotate a Vercel secret:

### 1. Set Up Credentials

```bash
export VERCEL_TOKEN="your-vercel-token"
export VERCEL_PROJECT_ID="your-project-id"
```

### 2. Dry Run First

Always test with `--dry-run` before making real changes:

```bash
birch rotate MY_API_KEY --env prod --service vercel --dry-run
```

### 3. Perform Rotation

When you're ready:

```bash
birch rotate MY_API_KEY --env prod --service vercel
```

You'll be prompted to confirm the change.

### 4. Optional: Trigger Redeploy

To automatically redeploy after rotation:

```bash
birch rotate MY_API_KEY --env prod --service vercel --redeploy
```

## Set Up the Daemon (Optional)

For app-signal rotation, start the background daemon:

```bash
birch daemon start
```

Now your application can trigger rotations automatically:

```bash
curl -X POST http://127.0.0.1:9123/rotate \
  -H "Content-Type: application/json" \
  -d '{
    "secret_name": "MY_API_KEY",
    "env": "prod",
    "service": "vercel"
  }'
```

Check daemon status:

```bash
birch daemon status
```

## View Audit Logs

Check the history of rotations:

```bash
# All recent rotations
birch audit --last 10

# Specific secret
birch audit MY_API_KEY --env prod
```

## Advanced: Set Up Key Pools (Optional)

For APIs with rate limits, you can set up a pool of keys for automatic rotation:

### 1. Create a Key Pool

```bash
# Create a pool with multiple keys
birch pool init TIKTOK_API_KEY --keys "sk_key1,sk_key2,sk_key3"
```

Or from a file:

```bash
# Create keys.txt with one key per line:
# sk_abc123xyz
# sk_def456uvw
# sk_ghi789rst

birch pool init TIKTOK_API_KEY --from-file ./keys.txt
```

### 2. Check Pool Status

```bash
birch pool status TIKTOK_API_KEY
# Pool: TIKTOK_API_KEY
# Status: âœ… Ready
# Total keys:      3
# Available:       3 (100%)
```

### 3. Rotate with Pool

Now when you rotate, Birch will automatically use the next available key:

```bash
birch rotate TIKTOK_API_KEY --env prod --service vercel
# ðŸŽ± Using key pool for 'TIKTOK_API_KEY' (2 available, 1 exhausted)
# âœ“ Marked current key as exhausted
# ðŸ”„ Rotating secret...
```

### 4. Automatic Rotation on Rate Limits

Your app can trigger rotation when hitting rate limits:

```javascript
if (response.status === 429) {
  // Signal birch to rotate to next key in pool
  await fetch('http://localhost:9123/rotate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      secret_name: 'TIKTOK_API_KEY',
      env: 'prod',
      service: 'vercel'
    })
  });
}
```

### 5. Manage Your Pool

```bash
# View all keys and their status
birch pool list TIKTOK_API_KEY

# Add a new key
birch pool add TIKTOK_API_KEY --key "sk_new_key"

# Remove exhausted keys
birch pool remove TIKTOK_API_KEY --index 0
```

## Next Steps

Now that you've completed your first rotation:

- [Learn about configuration options](/docs/configuration)
- [Set up multiple providers](/docs/connectors)
- [Read the operator runbook](/docs/operators/runbook)
- [Implement app-signal rotation](/docs/usage/app-signals)

